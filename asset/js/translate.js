// ============================================
// translate.js - Systeme de traduction FR/EN COMPLET
// Tous les termes de toutes les pages KINKA.FR
// ============================================

const translations = {
    
    // ============================================
    // NAVIGATION & HEADER
    // ============================================
    'Accueil': 'Home',
    'Catalogue': 'Catalog',
    'Promotions': 'Deals',
    'Coffrets': 'Box Sets',
    'Nouveautes': 'New Releases',
    'Meilleures ventes': 'Best Sellers',
    'Coup de coeur': 'Staff Picks',
    'Rechercher un manga, un auteur...': 'Search for a manga, an author...',
    'Rechercher': 'Search',
    
    // ============================================
    // BOUTONS & ACTIONS
    // ============================================
    'Se connecter': 'Sign in',
    'Se deconnecter': 'Sign out',
    'Connexion': 'Login',
    'Inscription': 'Sign up',
    'S\'inscrire': 'Sign up',
    'Creer un compte': 'Create account',
    'Mot de passe oublie': 'Forgot password',
    'Reinitialiser': 'Reset',
    'Envoyer': 'Send',
    'Valider': 'Submit',
    'Confirmer': 'Confirm',
    'Annuler': 'Cancel',
    'Retour': 'Back',
    'Suivant': 'Next',
    'Precedent': 'Previous',
    'Fermer': 'Close',
    'Modifier': 'Edit',
    'Supprimer': 'Delete',
    'Enregistrer': 'Save',
    'Telecharger': 'Download',
    'Imprimer': 'Print',
    'Partager': 'Share',
    
    // ============================================
    // COMPTE UTILISATEUR
    // ============================================
    'Mon compte': 'My account',
    'Mon profil': 'My profile',
    'Mes commandes': 'My orders',
    'Mes favoris': 'My favorites',
    'Ma wishlist': 'My wishlist',
    'Mes adresses': 'My addresses',
    'Parametres': 'Settings',
    'Deconnexion': 'Logout',
    'Informations personnelles': 'Personal information',
    'Changer mon mot de passe': 'Change my password',
    'Historique des commandes': 'Order history',
    
    // ============================================
    // HERO BANNER & BADGES
    // ============================================
    'TENDANCE ACTUELLE': 'TRENDING NOW',
    'PHENOMENE MONDIAL': 'WORLDWIDE PHENOMENON',
    'SERIE CULTE': 'CULT SERIES',
    'NOUVEAU': 'NEW',
    'PROMO': 'SALE',
    'EXCLUSIVITE': 'EXCLUSIVE',
    'EDITION LIMITEE': 'LIMITED EDITION',
    'BEST SELLER': 'BEST SELLER',
    'Decouvrez les derniers tomes': 'Discover the latest volumes',
    'Disponible des maintenant': 'Available now',
    'En precommande': 'Pre-order',
    'Bientot disponible': 'Coming soon',
    'Acheter le Tome': 'Buy Volume',
    'Acheter': 'Buy',
    'Voir la collection': 'View collection',
    'Voir le catalogue': 'View catalog',
    'En savoir plus': 'Learn more',
    
    // ============================================
    // SECTIONS DE LA PAGE
    // ============================================
    'Maisons d\'edition': 'Publishers',
    'Maisons d\'Edition': 'Publishers',
    'Les Maisons d\'Edition': 'Publishers',
    'Dernieres Nouveautes': 'Latest Releases',
    'Derniers Tomes': 'Latest Volumes',
    'Coups de coeur': 'Staff Picks',
    'Top ventes': 'Top Sales',
    'Recommandations': 'Recommendations',
    'Vous aimerez aussi': 'You might also like',
    'Articles similaires': 'Similar items',
    'Voir tout': 'View all',
    'Voir plus': 'View more',
    'Afficher plus': 'Show more',
    
    // ============================================
    // PRODUITS & CATALOGUE
    // ============================================
    'Ajouter au panier': 'Add to cart',
    'Ajouter': 'Add',
    'Retirer': 'Remove',
    'En stock': 'In stock',
    'Rupture de stock': 'Out of stock',
    'Stock limite': 'Limited stock',
    'Derniers exemplaires': 'Last copies',
    'Precommande': 'Pre-order',
    'Indisponible': 'Unavailable',
    'Epuise': 'Sold out',
    'Prix': 'Price',
    'Quantite': 'Quantity',
    'Description': 'Description',
    'Resume': 'Summary',
    'Synopsis': 'Synopsis',
    'Caracteristiques': 'Features',
    'Details': 'Details',
    'Informations': 'Information',
    'Specifications': 'Specifications',
    'Auteur': 'Author',
    'Auteurs': 'Authors',
    'Editeur': 'Publisher',
    'Collection': 'Collection',
    'Serie': 'Series',
    'Tome': 'Volume',
    'Genre': 'Genre',
    'Date de sortie': 'Release date',
    'Date de parution': 'Publication date',
    'Nombre de pages': 'Number of pages',
    'Format': 'Format',
    'Langue': 'Language',
    'ISBN': 'ISBN',
    'Etat': 'Condition',
    'Etat du livre': 'Book condition',
    'Neuf': 'New',
    'Occasion': 'Used',
    'Comme neuf': 'Like new',
    'Tres bon etat': 'Very good',
    'Bon etat': 'Good',
    
    // ============================================
    // FILTRES & TRI
    // ============================================
    'Filtrer': 'Filter',
    'Filtrer par': 'Filter by',
    'Filtres': 'Filters',
    'Trier': 'Sort',
    'Trier par': 'Sort by',
    'Categories': 'Categories',
    'Categorie': 'Category',
    'Prix croissant': 'Price: Low to High',
    'Prix decroissant': 'Price: High to Low',
    'Popularite': 'Popularity',
    'Nouveaute': 'New arrivals',
    'Meilleures notes': 'Top rated',
    'Nom A-Z': 'Name A-Z',
    'Nom Z-A': 'Name Z-A',
    'Disponibilite': 'Availability',
    'Tout effacer': 'Clear all',
    'Reinitialiser les filtres': 'Reset filters',
    'Appliquer': 'Apply',
    'Appliquer les filtres': 'Apply filters',
    
    // ============================================
    // RESULTATS & RECHERCHE
    // ============================================
    'resultats': 'results',
    'resultat': 'result',
    'produits': 'products',
    'produit': 'product',
    'articles': 'items',
    'article': 'item',
    'Aucun resultat': 'No results',
    'Aucun produit trouve': 'No products found',
    'produits trouves': 'products found',
    'Recherche en cours': 'Searching',
    'Votre recherche': 'Your search',
    'Suggestions': 'Suggestions',
    'Recherches populaires': 'Popular searches',
    'Resultats de recherche pour': 'Search results for',
    
    // ============================================
    // PANIER
    // ============================================
    'Mon panier': 'My cart',
    'Panier': 'Cart',
    'Votre panier': 'Your cart',
    'Votre panier est vide': 'Your cart is empty',
    'Articles dans le panier': 'Items in cart',
    'Sous-total': 'Subtotal',
    'Total': 'Total',
    'Frais de port': 'Shipping',
    'Livraison': 'Delivery',
    'Livraison gratuite': 'Free shipping',
    'Livraison offerte': 'Free delivery',
    'Offerte des': 'Free from',
    'Continuer mes achats': 'Continue shopping',
    'Passer la commande': 'Checkout',
    'Proceder au paiement': 'Proceed to payment',
    'Vider le panier': 'Empty cart',
    'Mettre a jour': 'Update',
    'Code promo': 'Promo code',
    'Coupon': 'Coupon',
    'Appliquer le code': 'Apply code',
    'Reduction': 'Discount',
    'TVA': 'VAT',
    
    // ============================================
    // COMMANDE & PAIEMENT
    // ============================================
    'Ma commande': 'My order',
    'Recapitulatif': 'Summary',
    'Adresse de livraison': 'Shipping address',
    'Adresse de facturation': 'Billing address',
    'Mode de livraison': 'Delivery method',
    'Livraison standard': 'Standard delivery',
    'Livraison express': 'Express delivery',
    'Point relais': 'Pickup point',
    'Mode de paiement': 'Payment method',
    'Carte bancaire': 'Credit card',
    'PayPal': 'PayPal',
    'Virement': 'Bank transfer',
    'Numero de commande': 'Order number',
    'Reference': 'Reference',
    'Statut': 'Status',
    'En preparation': 'Processing',
    'Expedie': 'Shipped',
    'Livre': 'Delivered',
    'Annule': 'Cancelled',
    'Suivi de commande': 'Order tracking',
    'Numero de suivi': 'Tracking number',
    'Telecharger la facture': 'Download invoice',
    'Facture': 'Invoice',
    
    // ============================================
    // FORMULAIRES
    // ============================================
    'Nom': 'Name',
    'Prenom': 'First name',
    'Nom de famille': 'Last name',
    'Email': 'Email',
    'Adresse email': 'Email address',
    'Mot de passe': 'Password',
    'Nouveau mot de passe': 'New password',
    'Ancien mot de passe': 'Old password',
    'Confirmer le mot de passe': 'Confirm password',
    'Adresse': 'Address',
    'Adresse ligne 1': 'Address line 1',
    'Adresse ligne 2': 'Address line 2',
    'Complement d\'adresse': 'Additional address',
    'Code postal': 'Postal code',
    'Ville': 'City',
    'Pays': 'Country',
    'Region': 'Region',
    'Telephone': 'Phone',
    'Numero de telephone': 'Phone number',
    'Portable': 'Mobile',
    'Message': 'Message',
    'Votre message': 'Your message',
    'Objet': 'Subject',
    'Commentaire': 'Comment',
    'Avis': 'Review',
    'Note': 'Rating',
    'Titre': 'Title',
    
    // ============================================
    // VALIDATION & ERREURS
    // ============================================
    'Champ obligatoire': 'Required field',
    'Veuillez remplir tous les champs': 'Please fill all fields',
    'Email invalide': 'Invalid email',
    'Mot de passe trop court': 'Password too short',
    'Les mots de passe ne correspondent pas': 'Passwords do not match',
    'Erreur': 'Error',
    'Succes': 'Success',
    'Confirmation': 'Confirmation',
    'Attention': 'Warning',
    'Information': 'Information',
    'Produit ajoute au panier': 'Product added to cart',
    'Ajoute aux favoris': 'Added to favorites',
    'Commande validee': 'Order confirmed',
    'Email envoye': 'Email sent',
    'Modifications enregistrees': 'Changes saved',
    
    // ============================================
    // FOOTER
    // ============================================
    'Navigation': 'Navigation',
    'Compte': 'Account',
    'Support': 'Support',
    'Service client': 'Customer service',
    'Aide': 'Help',
    'Nous contacter': 'Contact us',
    'Contactez-nous': 'Contact us',
    'Contact': 'Contact',
    'A propos': 'About',
    'A propos de nous': 'About us',
    'Qui sommes-nous': 'Who we are',
    'Notre histoire': 'Our story',
    'Mentions legales': 'Legal notice',
    'Politique de confidentialite': 'Privacy policy',
    'Conditions generales de vente': 'Terms of sale',
    'Conditions generales d\'utilisation': 'Terms of use',
    'CGV': 'Terms of sale',
    'CGU': 'Terms of use',
    'Politique de retour': 'Return policy',
    'Retours': 'Returns',
    'Formulaire de contact': 'Contact form',
    'FAQ': 'FAQ',
    'Questions frequentes': 'Frequently Asked Questions',
    'Newsletter': 'Newsletter',
    'Abonnez-vous': 'Subscribe',
    'S\'abonner': 'Subscribe',
    'Suivez-nous': 'Follow us',
    'Reseaux sociaux': 'Social networks',
    'Tous droits reserves': 'All rights reserved',
    'Votre boutique de reference': 'Your reference shop',
    'pour l\'achat de mangas': 'for buying manga',
    'neufs et d\'occasion': 'new and used',
    
    // ============================================
    // CATEGORIES DE MANGAS
    // ============================================
    'Shonen': 'Shonen',
    'Shojo': 'Shojo',
    'Seinen': 'Seinen',
    'Josei': 'Josei',
    'Kodomo': 'Kodomo',
    'Action': 'Action',
    'Aventure': 'Adventure',
    'Combat': 'Fight',
    'Comedie': 'Comedy',
    'Drame': 'Drama',
    'Fantastique': 'Fantasy',
    'Horreur': 'Horror',
    'Romance': 'Romance',
    'Science-fiction': 'Science Fiction',
    'Thriller': 'Thriller',
    'Mystere': 'Mystery',
    'Surnaturel': 'Supernatural',
    'Ecole': 'School',
    'Sport': 'Sports',
    'Tranche de vie': 'Slice of life',
    
    // ============================================
    // PAGES SPECIFIQUES
    // ============================================
    
    // Page CGU/CGV
    'Derniere mise a jour': 'Last updated',
    'Article': 'Article',
    'Accepter': 'Accept',
    'Refuser': 'Decline',
    'J\'ai lu et j\'accepte': 'I have read and accept',
    
    // Page Contact
    'Formulaire': 'Form',
    'Coordonnees': 'Contact details',
    'Horaires': 'Opening hours',
    'Lundi': 'Monday',
    'Mardi': 'Tuesday',
    'Mercredi': 'Wednesday',
    'Jeudi': 'Thursday',
    'Vendredi': 'Friday',
    'Samedi': 'Saturday',
    'Dimanche': 'Sunday',
    'Ferme': 'Closed',
    
    // Page FAQ
    'Question': 'Question',
    'Reponse': 'Answer',
    'Categorie': 'Category',
    'Toutes les categories': 'All categories',
    'Cette reponse vous a-t-elle aide': 'Was this answer helpful',
    'Oui': 'Yes',
    'Non': 'No',
    
    // Page Profil
    'Photo de profil': 'Profile picture',
    'Changer la photo': 'Change picture',
    'Membre depuis': 'Member since',
    'Derniere connexion': 'Last login',
    'Preferences': 'Preferences',
    'Langue preferee': 'Preferred language',
    'Notifications': 'Notifications',
    'Recevoir les offres': 'Receive offers',
    'Newsletter': 'Newsletter',
    
    // ============================================
    // TEMPS & DATES
    // ============================================
    'aujourd\'hui': 'today',
    'hier': 'yesterday',
    'demain': 'tomorrow',
    'jours': 'days',
    'heures': 'hours',
    'minutes': 'minutes',
    'secondes': 'seconds',
    'jour': 'day',
    'heure': 'hour',
    'minute': 'minute',
    'seconde': 'second',
    'semaine': 'week',
    'mois': 'month',
    'annee': 'year',
    'il y a': 'ago',
    'dans': 'in',
    
    // ============================================
    // DIVERS
    // ============================================
    'Chargement': 'Loading',
    'Chargement...': 'Loading...',
    'Veuillez patienter': 'Please wait',
    'Plus d\'informations': 'More information',
    'Lire la suite': 'Read more',
    'Voir moins': 'See less',
    'Afficher tout': 'Show all',
    'Masquer': 'Hide',
    'Ouvrir': 'Open',
    'Telecharger': 'Download',
    'Partager sur': 'Share on',
    'Copier le lien': 'Copy link',
    'Page': 'Page',
    'sur': 'of',
    'de': 'of',
    'a': 'to',
    'et': 'and',
    'ou': 'or',
    'Gratuit': 'Free',
    'Offert': 'Free',
    'Nouveau': 'New',
    'Recommande': 'Recommended',
    'Populaire': 'Popular',
    'Tendance': 'Trending',
    
    // ============================================
    // NOMBRES & QUANTITES
    // ============================================
    'Aucun': 'None',
    'Aucune': 'None',
    'Tous': 'All',
    'Toutes': 'All',
    'Plusieurs': 'Several',
    'Quelques': 'Some',
    
    // ============================================
    // MESSAGES COURANTS
    // ============================================
    'Bienvenue': 'Welcome',
    'Merci': 'Thank you',
    'Felicitations': 'Congratulations',
    'Desol√©': 'Sorry',
    'Attention': 'Warning',
    'Important': 'Important',
    'Nouvelle': 'News',
    'Actualites': 'News',
    'Blog': 'Blog',
    'Evenements': 'Events',
    
    // ============================================
    // HERO BANNER TEXTES SPECIFIQUES
    // ============================================
    'Plongez dans l\'univers': 'Dive into the world',
    'Rejoignez les eleves': 'Join the students',
    'Une aventure epique': 'An epic adventure',
    'L\'histoire commence': 'The story begins',
    'Ne manquez pas': 'Don\'t miss',
    
    // ============================================
    // SERIES POPULAIRES (optionnel)
    // ============================================
    'One Piece': 'One Piece',
    'Naruto': 'Naruto',
    'Dragon Ball': 'Dragon Ball',
    'My Hero Academia': 'My Hero Academia',
    'Demon Slayer': 'Demon Slayer',
    'Attack on Titan': 'Attack on Titan',
    'Jujutsu Kaisen': 'Jujutsu Kaisen',
    'Chainsaw Man': 'Chainsaw Man',
    'Spy x Family': 'Spy x Family',
    
    // ============================================
    // EDITEURS
    // ============================================
    'Glenat': 'Glenat',
    'Kana': 'Kana',
    'Pika': 'Pika',
    'Ki-oon': 'Ki-oon',
    'Kurokawa': 'Kurokawa',
    'Delcourt': 'Delcourt',
    'Tonkam': 'Tonkam',
    'Panini': 'Panini',
    'Akata': 'Akata'
};

// ============================================
// INITIALISATION
// ============================================

document.addEventListener('DOMContentLoaded', function() {
    
    let languageToggle = document.getElementById('language-toggle');
    
    if (!languageToggle) {
        creerBoutonLangue();
        languageToggle = document.getElementById('language-toggle');
    }
    
    const langueActuelle = localStorage.getItem('language') || 'fr';
    
    if (langueActuelle === 'en') {
        traduirePage('en');
        mettreAJourBouton('en');
    }
    
    if (languageToggle) {
        languageToggle.addEventListener('click', function() {
            const langueActuelle = document.documentElement.lang || 'fr';
            const nouvelleLangue = langueActuelle === 'fr' ? 'en' : 'fr';
            
            traduirePage(nouvelleLangue);
            mettreAJourBouton(nouvelleLangue);
            localStorage.setItem('language', nouvelleLangue);
            
            console.log('Langue changee : ' + nouvelleLangue.toUpperCase());
        });
    }
    
    console.log('Systeme de traduction initialise avec ' + Object.keys(translations).length + ' traductions');
});

function traduirePage(langue) {
    document.documentElement.lang = langue;
    
    if (langue === 'fr') {
        location.reload();
        return;
    }
    
    // Traduire les textes
    traduireTextes(document.body);
    
    // Traduire les placeholders
    const inputs = document.querySelectorAll('input[placeholder], textarea[placeholder]');
    inputs.forEach(function(input) {
        const placeholder = input.getAttribute('placeholder');
        if (translations[placeholder]) {
            input.setAttribute('placeholder', translations[placeholder]);
        }
    });
    
    // Traduire les attributs title
    const elementsAvecTitle = document.querySelectorAll('[title]');
    elementsAvecTitle.forEach(function(element) {
        const title = element.getAttribute('title');
        if (translations[title]) {
            element.setAttribute('title', translations[title]);
        }
    });
    
    // Traduire les attributs alt
    const images = document.querySelectorAll('img[alt]');
    images.forEach(function(img) {
        const alt = img.getAttribute('alt');
        if (translations[alt]) {
            img.setAttribute('alt', translations[alt]);
        }
    });
}

function traduireTextes(element) {
    const noeuds = element.childNodes;
    
    noeuds.forEach(function(noeud) {
        if (noeud.nodeType === Node.TEXT_NODE) {
            const texte = noeud.textContent.trim();
            
            if (texte && translations[texte]) {
                noeud.textContent = noeud.textContent.replace(texte, translations[texte]);
            }
        }
        else if (noeud.nodeType === Node.ELEMENT_NODE) {
            if (noeud.tagName !== 'SCRIPT' && noeud.tagName !== 'STYLE') {
                traduireTextes(noeud);
            }
        }
    });
}

function mettreAJourBouton(langue) {
    const bouton = document.getElementById('language-toggle');
    if (!bouton) return;
    
    const texteLangue = bouton.querySelector('.language-text');
    
    if (langue === 'fr') {
        if (texteLangue) texteLangue.textContent = 'EN';
        bouton.setAttribute('title', 'Switch to English');
    } else {
        if (texteLangue) texteLangue.textContent = 'FR';
        bouton.setAttribute('title', 'Passer en francais');
    }
}

function creerBoutonLangue() {
    const bouton = document.createElement('button');
    bouton.id = 'language-toggle';
    bouton.className = 'icon-btn';
    bouton.setAttribute('aria-label', 'Changer de langue');
    bouton.setAttribute('title', 'Switch to English');
    bouton.style.fontSize = '0.75rem';
    bouton.style.fontWeight = '600';
    
    const texte = document.createElement('span');
    texte.className = 'language-text';
    texte.textContent = 'EN';
    
    bouton.appendChild(texte);
    
    const navActions = document.querySelector('.nav-actions');
    if (navActions) {
        const connectBtn = navActions.querySelector('.connect-btn');
        if (connectBtn) {
            navActions.insertBefore(bouton, connectBtn.parentElement);
        } else {
            navActions.appendChild(bouton);
        }
    }
    
    console.log('Bouton de langue cree');
}

// Fonction utilitaire pour traduire une chaine depuis JavaScript
function t(texte) {
    const langue = document.documentElement.lang || 'fr';
    if (langue === 'en' && translations[texte]) {
        return translations[texte];
    }
    return texte;
}

console.log('Traduction FR/EN prete - ' + Object.keys(translations).length + ' termes disponibles');